{% for driver in drivers -%}
{%- for capability in driver.capabilities if entry_point_family in capability.entry_points -%}
#if defined({% if capability.depend_on is defined -%}{{ capability.depend_on }} {% else -%} {{ 1 }} {% endif %})
{% filter indent(width = nest_indent) %}
case {{(driver.prefix + "_" + driver.type + "_driver_id").upper()}}:
    {{custom(driver)| indent(8)}}  
    return({{driver.prefix}}_{{driver.type}}_{{entry_point}}({{ entry_point_attributes(driver) | indent(20) }}));
{% endfilter %}
#endif
{% endfor %}
{% endfor %}
